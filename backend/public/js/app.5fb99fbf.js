(function(e){function t(t){for(var n,i,u=t[0],a=t[1],c=t[2],p=0,d=[];p<u.length;p++)i=u[p],o[i]&&d.push(o[i][0]),o[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);l&&l(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,u=1;u<r.length;u++){var a=r[u];0!==o[a]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=a;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},"2fb4":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("user-msg"),r("app-header"),r("router-view")],1)},s=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("nav",[r("router-link",{attrs:{to:"/"}},[r("span",{attrs:{role:"img","aria-label":"logo"}},[e._v("🙏")])]),r("router-link",{attrs:{to:"/review"}},[e._v("Reviews")]),r("router-link",{attrs:{to:"/chat"}},[e._v("Chat")]),r("router-link",{attrs:{to:"/login"}},[e._v("Login / Signup")])],1),e.loggedInUser?r("section",{staticClass:"loggedin-user"},[r("router-link",{attrs:{to:"/user/"+e.loggedInUser._id}},[e._v("\n      "+e._s(e.loggedInUser.fullname)+"\n    ")]),r("span",[e._v(e._s(e.loggedInUser.score))])],1):e._e()])},u=[],a={computed:{loggedInUser:function(){return this.$store.getters.loggedinUser}}},c=a,l=r("2877"),p=Object(l["a"])(c,i,u,!1,null,null,null),d=p.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.alive?r("div",{staticClass:"alert",class:e.alertClass},[e._v("\n  "+e._s(e.msg.txt)+"\n")]):e._e()},f=[],m="show-msg",g=new n["a"];var h={created:function(){var e=this;g.$on(m,function(t){e.msg=t;var r=t.delay||2e3;e.alive=!0,setTimeout(function(){e.alive=!1},r)})},data:function(){return{alive:!1,msg:null}},computed:{alertClass:function(){if(this.msg)return"alert-".concat(this.msg.type)}}},w=h,b=Object(l["a"])(w,v,f,!1,null,null,null),_=b.exports,y={components:{appHeader:d,userMsg:_}},x=y,R=Object(l["a"])(x,o,s,!1,null,null,null),k=R.exports,U=r("8c4f"),O=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},j=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container home text-center"},[n("h1",[e._v("Home Page")]),n("h5",{staticClass:"text-center"},[e._v("\n    Powered up Frontend \n  ")]),n("img",{attrs:{alt:"Vue logo",src:r("cf05")}})])}],S={name:"home",data:function(){return{}},computed:{},created:function(){},methods:{}},C=S,E=Object(l["a"])(C,O,j,!1,null,null,null),$=E.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h1",[e._v("About Us")]),r("p",[e._v("We like You")]),r("h2",[e._v("Lets Chat About "+e._s(e.topic))]),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.topic,expression:"topic"}],attrs:{type:"radio",value:"Politics"},domProps:{checked:e._q(e.topic,"Politics")},on:{change:[function(t){e.topic="Politics"},e.changeTopic]}}),e._v(" \n    Politics\n  ")]),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.topic,expression:"topic"}],attrs:{type:"radio",value:"Love"},domProps:{checked:e._q(e.topic,"Love")},on:{change:[function(t){e.topic="Love"},e.changeTopic]}}),e._v(" \n    Love\n  ")]),r("ul",e._l(e.msgs,function(t,n){return r("li",{key:n},[r("span",[e._v(e._s(t.from)+":")]),e._v(e._s(t.txt)+"\n    ")])}),0),r("hr"),r("form",{on:{submit:function(t){return t.preventDefault(),e.sendMsg(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.msg.txt,expression:"msg.txt"}],attrs:{type:"text",placeholder:"Your msg"},domProps:{value:e.msg.txt},on:{input:function(t){t.target.composing||e.$set(e.msg,"txt",t.target.value)}}}),r("button",[e._v("Send")])])])},P=[],L=(r("ac6a"),r("75fc"),r("96cf"),r("3b8d")),T=r("8055"),M=r.n(T),A=r("bc3a"),N=r.n(A),D="/api/",q=N.a.create({withCredentials:!0}),J={get:function(e,t){return W(e,"GET",t)},post:function(e,t){return W(e,"POST",t)},put:function(e,t){return W(e,"PUT",t)},delete:function(e,t){return W(e,"DELETE",t)}};function W(e){return F.apply(this,arguments)}function F(){return F=Object(L["a"])(regeneratorRuntime.mark(function e(t){var r,n,o,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"GET",n=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,q({url:"".concat(D).concat(t),method:r,data:n,params:"GET"===r?n:null});case 5:return o=e.sent,e.abrupt("return",o.data);case 9:throw e.prev=9,e.t0=e["catch"](2),console.log("Had Issues ".concat(r,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&be.push("/login"),e.t0;case 15:case"end":return e.stop()}},e,null,[[2,9]])})),F.apply(this,arguments)}var Y="user-watch",H="user-updated",B="review-added",G="review-about-you",V="",z=K();function K(){var e=null,t={setup:function(){var t=Object(L["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=M()(V);case 1:case"end":return t.stop()}},t)}));function r(){return t.apply(this,arguments)}return r}(),on:function(t,r){e.on(t,r)},off:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(r?e.off(t,r):e.removeAllListeners(t))},emit:function(t,r){e.emit(t,r)},terminate:function(){e=null}};return t}window.socketService=z,z.setup();var Q={data:function(){return{msg:{from:"Me",txt:""},msgs:[],topic:"Love"}},created:function(){z.setup(),z.emit("chat topic",this.topic),z.on("chat addMsg",this.addMsg)},destroyed:function(){z.off("chat addMsg",this.addMsg),z.terminate()},methods:{addMsg:function(e){this.msgs.push(e)},sendMsg:function(){var e=this;console.log("Sending",this.msg),z.emit("chat newMsg",this.msg),this.addMsg(this.msg),setTimeout(function(){return e.addMsg({from:"Dummy",txt:"Yey"})},2e3),this.msg={from:"Me",txt:""}},changeTopic:function(){z.emit("chat topic",this.topic)}}},X=Q,Z=Object(l["a"])(X,I,P,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container home"},[r("ul",{staticClass:"review-list"},e._l(e.reviews,function(t){return r("li",{key:t._id},[r("p",[e._v("\n        About\n        "),r("router-link",{attrs:{to:"user/"+t.aboutUser._id}},[e._v("\n          "+e._s(t.aboutUser.fullname)+"\n        ")])],1),r("h3",[e._v(e._s(t.txt))]),r("p",[e._v("By \n        "),r("router-link",{attrs:{to:"user/"+t.byUser._id}},[e._v("\n          "+e._s(t.byUser.fullname)+"\n        ")])],1),r("hr")])}),0),r("hr"),e.loggedInUser?r("form",{on:{submit:function(t){return t.preventDefault(),e.addReview()}}},[r("h2",[e._v("Your gossip:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.reviewToEdit.aboutUserId,expression:"reviewToEdit.aboutUserId"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.reviewToEdit,"aboutUserId",t.target.multiple?r:r[0])}}},e._l(e.users,function(t){return r("option",{key:t._id,domProps:{value:t._id}},[e._v("\n        "+e._s(t.fullname)+"\n      ")])}),0),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reviewToEdit.txt,expression:"reviewToEdit.txt"}],attrs:{placeholder:"Your Opinion Matters..."},domProps:{value:e.reviewToEdit.txt},on:{input:function(t){t.target.composing||e.$set(e.reviewToEdit,"txt",t.target.value)}}}),r("button",[e._v("Save")])]):e._e()])},re=[],ne={name:"home",data:function(){return{reviewToEdit:{txt:"",aboutUserId:null}}},computed:{reviews:function(){return this.$store.getters.reviews},users:function(){return this.$store.getters.users},loggedInUser:function(){return this.$store.getters.loggedinUser}},created:function(){this.$store.dispatch({type:"loadUsers"}),this.$store.dispatch({type:"loadReviews"})},methods:{addReview:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch({type:"addReview",review:this.reviewToEdit});case 2:this.reviewToEdit={txt:"",aboutUserId:null};case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},oe=ne,se=Object(l["a"])(oe,te,re,!1,null,null,null),ie=se.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container about"},[r("p",[e._v(e._s(e.msg))]),e.loggedinUser?r("div",[r("h3",[e._v("\n      Loggedin User:\n      "+e._s(e.loggedinUser.username)+"\n      "),r("button",{on:{click:e.doLogout}},[e._v("Logout")])])]):r("div",[r("h2",[e._v("Login")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.doLogin(t)}}},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.loginCred.username,expression:"loginCred.username"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.loginCred,"username",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[e._v("Select User")]),e._l(e.users,function(t){return r("option",{key:t._id,domProps:{value:t.username}},[e._v(e._s(t.fullname))])})],2),r("button",[e._v("Login")])]),r("p",{staticClass:"mute"},[e._v("user1 or admin, pass:123 ")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.doSignup(t)}}},[r("h2",[e._v("Signup")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.fullname,expression:"signupCred.fullname"}],attrs:{type:"text",placeholder:"Your full name"},domProps:{value:e.signupCred.fullname},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"fullname",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.password,expression:"signupCred.password"}],attrs:{type:"text",placeholder:"Password"},domProps:{value:e.signupCred.password},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"password",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.signupCred.username,expression:"signupCred.username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.signupCred.username},on:{input:function(t){t.target.composing||e.$set(e.signupCred,"username",t.target.value)}}}),r("button",[e._v("Signup")])])]),r("hr"),r("details",[r("summary",[e._v("\n      Admin Section\n    ")]),r("ul",e._l(e.users,function(t){return r("li",{key:t._id},[r("pre",[e._v(e._s(t))]),r("button",{on:{click:function(r){return e.removeUser(t._id)}}},[e._v("x")])])}),0)])])},ae=[],ce={name:"test",data:function(){return{msg:"",loginCred:{username:"user1",password:"123"},signupCred:{username:"",password:"",fullname:""}}},computed:{users:function(){return this.$store.getters.users},loggedinUser:function(){return this.$store.getters.loggedinUser}},created:function(){this.loadUsers()},methods:{doLogin:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loginCred.username){e.next=3;break}return this.msg="Please enter username/password",e.abrupt("return");case 3:return e.prev=3,e.next=6,this.$store.dispatch({type:"login",userCred:this.loginCred});case 6:this.$router.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](3),console.log(e.t0),this.msg="Failed to login";case 13:case"end":return e.stop()}},e,this,[[3,9]])}));function t(){return e.apply(this,arguments)}return t}(),doLogout:function(){this.$store.dispatch({type:"logout"})},doSignup:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.signupCred.fullname&&this.signupCred.password&&this.signupCred.username){e.next=3;break}return this.msg="Please fill up the form",e.abrupt("return");case 3:return e.next=5,this.$store.dispatch({type:"signup",userCred:this.signupCred});case 5:this.$router.push("/");case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),loadUsers:function(){this.$store.dispatch({type:"loadUsers"})},removeUser:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch({type:"removeUser",userId:t});case 3:this.msg="User removed",e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.msg="Failed to remove user";case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(t){return e.apply(this,arguments)}return t}()}},le=ce,pe=Object(l["a"])(le,ue,ae,!1,null,null,null),de=pe.exports,ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user?r("section",[r("h1",[e._v("User Details - "+e._s(e.user.fullname))]),r("h3",[e._v(e._s(e.user.username)+" score: "+e._s(e.user.score))]),r("ul",e._l(e.user.givenReviews,function(t){return r("li",{key:t._id},[e._v("\n      "+e._s(t.txt)+"\n      "),r("router-link",{attrs:{to:"/user/"+t.aboutUser._id}},[e._v("\n        About "+e._s(t.aboutUser.fullname)+"\n      ")])],1)}),0),r("details",[r("summary",[e._v("Full JSON")]),r("pre",[e._v(e._s(e.user))])])]):e._e()},fe=[],me={data:function(){return{}},created:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),watch:{userId:{handler:function(){this.$store.dispatch({type:"loadAndWatchUser",userId:this.userId})},immediate:!0}},computed:{user:function(){return this.$store.getters.watchedUser},userId:function(){return this.$route.params.id}}},ge=me,he=Object(l["a"])(ge,ve,fe,!1,null,null,null),we=he.exports;n["a"].use(U["a"]);var be=new U["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:$},{path:"/review",name:"review",component:ie},{path:"/chat",name:"chat",component:ee},{path:"/login",name:"loginSignup",component:de},{path:"/user/:id",name:"user-details",component:we}]}),_e=r("2f62"),ye=(r("8e6e"),r("456d"),r("bd86"));r("7514"),r("20d6");var xe={query:Re,get:ke,post:Ue,put:Oe,remove:je};function Re(e){var t=JSON.parse(localStorage.getItem(e))||[];return Promise.resolve(t)}function ke(e,t){return Re(e).then(function(e){return e.find(function(e){return e._id===t})})}function Ue(e,t){return t._id=Ce(),Re(e).then(function(r){return r.push(t),Se(e,r),t})}function Oe(e,t){return Re(e).then(function(r){var n=r.findIndex(function(e){return e._id===t._id});return r.splice(n,1,t),Se(e,r),t})}function je(e,t){return Re(e).then(function(r){var n=r.findIndex(function(e){return e._id===t});r.splice(n,1),Se(e,r)})}function Se(e,t){localStorage.setItem(e,JSON.stringify(t))}function Ce(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}var Ee="loggedinUser",$e=10,Ie=null,Pe={login:qe,logout:Ye,signup:We,getUsers:Le,getById:Te,remove:Ae,update:Ne,getLoggedinUser:ze,increaseScore:Be};function Le(){return J.get("user")}function Te(e){return Me.apply(this,arguments)}function Me(){return Me=Object(L["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.get("user/".concat(t));case 2:return r=e.sent,Ie=r,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),Me.apply(this,arguments)}function Ae(e){return J.delete("user/".concat(e))}function Ne(e){return De.apply(this,arguments)}function De(){return De=Object(L["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.put("user/".concat(t._id),t);case 2:return t=e.sent,ze()._id===t._id&&Ve(t),e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),De.apply(this,arguments)}function qe(e){return Je.apply(this,arguments)}function Je(){return Je=Object(L["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.post("auth/login",t);case 2:if(r=e.sent,z.emit("login",r._id),!r){e.next=6;break}return e.abrupt("return",Ve(r));case 6:case"end":return e.stop()}},e)})),Je.apply(this,arguments)}function We(e){return Fe.apply(this,arguments)}function Fe(){return Fe=Object(L["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.post("auth/signup",t);case 2:return r=e.sent,z.emit("set-user-socket",r._id),e.abrupt("return",Ve(r));case 5:case"end":return e.stop()}},e)})),Fe.apply(this,arguments)}function Ye(){return He.apply(this,arguments)}function He(){return He=Object(L["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return sessionStorage.removeItem(Ee),z.emit("unset-user-socket"),e.next=4,J.post("auth/logout");case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),He.apply(this,arguments)}function Be(){return Ge.apply(this,arguments)}function Ge(){return Ge=Object(L["a"])(regeneratorRuntime.mark(function e(){var t,r,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:$e,r=ze(),r.score=r.score+t||t,e.next=5,Ne(r);case 5:return e.abrupt("return",r.score);case 6:case"end":return e.stop()}},e)})),Ge.apply(this,arguments)}function Ve(e){return sessionStorage.setItem(Ee,JSON.stringify(e)),e}function ze(){return JSON.parse(sessionStorage.getItem(Ee)||"null")}function Ke(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(r,!0).forEach(function(t){Object(ye["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}window.userService=Pe,Object(L["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:ze(),window.addEventListener("storage",Object(L["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(Ie){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,xe.query("user");case 4:if(t=e.sent,r=t.find(function(e){return e._id===Ie._id}),r){e.next=8;break}return e.abrupt("return");case 8:Ie.score!==r.score&&(console.log("Watched user score changed - localStorage updated from another browser"),z.emit(H,r)),Ie=r;case 10:case"end":return e.stop()}},e)})));case 2:case"end":return e.stop()}},e)}))(),Object(L["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=ze(),t&&z.emit("set-user-socket",t._id);case 2:case"end":return e.stop()}},e)}))();var Xe={state:{loggedinUser:Pe.getLoggedinUser(),users:[],watchedUser:null},getters:{users:function(e){var t=e.users;return t},loggedinUser:function(e){var t=e.loggedinUser;return t},watchedUser:function(e){var t=e.watchedUser;return t}},mutations:{setLoggedinUser:function(e,t){var r=t.user;e.loggedinUser=r?Qe({},r):null},setWatchedUser:function(e,t){var r=t.user;e.watchedUser=r},setUsers:function(e,t){var r=t.users;e.users=r},removeUser:function(e,t){var r=t.userId;e.users=e.users.filter(function(e){return e._id!==r})},setUserScore:function(e,t){var r=t.score;e.loggedinUser.score=r}},actions:{login:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t,r){var n,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,o=r.userCred,e.prev=2,e.next=5,Pe.login(o);case 5:return s=e.sent,n({type:"setLoggedinUser",user:s}),e.abrupt("return",s);case 10:throw e.prev=10,e.t0=e["catch"](2),console.log("userStore: Error in login",e.t0),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,10]])}));function t(t,r){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t,r){var n,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,o=r.userCred,e.prev=2,e.next=5,Pe.signup(o);case 5:return s=e.sent,n({type:"setLoggedinUser",user:s}),e.abrupt("return",s);case 10:throw e.prev=10,e.t0=e["catch"](2),console.log("userStore: Error in signup",e.t0),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,10]])}));function t(t,r){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,Pe.logout();case 4:r({type:"setLoggedinUser",user:null}),e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),console.log("userStore: Error in logout",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[1,7]])}));function t(t){return e.apply(this,arguments)}return t}(),loadUsers:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,Pe.getUsers();case 4:n=e.sent,r({type:"setUsers",users:n}),e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](1),console.log("userStore: Error in loadUsers",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}));function t(t){return e.apply(this,arguments)}return t}(),loadAndWatchUser:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t,r){var n,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,o=r.userId,e.prev=2,e.next=5,Pe.getById(o);case 5:s=e.sent,n({type:"setWatchedUser",user:s}),z.emit(Y,o),z.off(H),z.on(H,function(e){n({type:"setWatchedUser",user:e})}),e.next=16;break;case 12:throw e.prev=12,e.t0=e["catch"](2),console.log("userStore: Error in loadAndWatchUser",e.t0),e.t0;case 16:case"end":return e.stop()}},e,null,[[2,12]])}));function t(t,r){return e.apply(this,arguments)}return t}(),removeUser:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t,r){var n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,o=r.userId,e.prev=2,e.next=5,Pe.remove(o);case 5:n({type:"removeUser",userId:o}),e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](2),console.log("userStore: Error in removeUser",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[2,8]])}));function t(t,r){return e.apply(this,arguments)}return t}(),updateUser:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t,r){var n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,o=r.user,e.prev=2,e.next=5,Pe.update(o);case 5:o=e.sent,n({type:"setUser",user:o}),e.next=13;break;case 9:throw e.prev=9,e.t0=e["catch"](2),console.log("userStore: Error in updateUser",e.t0),e.t0;case 13:case"end":return e.stop()}},e,null,[[2,9]])}));function t(t,r){return e.apply(this,arguments)}return t}(),increaseScore:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.prev=1,e.next=4,Pe.increaseScore();case 4:n=e.sent,r({type:"setUserScore",score:n}),e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](1),console.log("userStore: Error in increaseScore",e.t0),e.t0;case 12:case"end":return e.stop()}},e,null,[[1,8]])}));function t(t){return e.apply(this,arguments)}return t}()}},Ze={state:{},getters:{},mutations:{setJob:function(e,t){var r=t.job;e.job=r}},actions:{sendMsg:function(e,t){var r=t.msg;z.emit("sendMsg",r)},getChatHistory:function(e,t){var r=t.chatId;z.emit("getHistory",r)}}},et=(r("7f7f"),{add:nt,query:tt,remove:rt});function tt(e){var t=e?"?name=".concat(e.name,"&sort=anaAref"):"";return J.get("review".concat(t))}function rt(e){return J.delete("review/".concat(e))}function nt(e){return ot.apply(this,arguments)}function ot(){return ot=Object(L["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J.post("review",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)})),ot.apply(this,arguments)}Object(L["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe.query("review");case 2:t=e.sent,window.addEventListener("storage",Object(L["a"])(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,xe.query("review");case 2:r=e.sent,r.length===t.length+1&&(console.log("Review Added - localStorage updated from another browser"),z.emit(B,r[r.length-1])),t=r;case 5:case"end":return e.stop()}},e)})));case 4:case"end":return e.stop()}},e)}))();var st={state:{reviews:[]},getters:{reviews:function(e){return e.reviews}},mutations:{setReviews:function(e,t){var r=t.reviews;e.reviews=r},addReview:function(e,t){var r=t.review;e.reviews.push(r)},removeReview:function(e,t){var r=t.reviewId;e.reviews=e.reviews.filter(function(e){return e._id!==r})}},actions:{addReview:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.review,e.prev=1,e.next=4,et.add(n);case 4:return n=e.sent,t.commit({type:"addReview",review:n}),t.dispatch({type:"increaseScore"}),e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e["catch"](1),console.log("reviewStore: Error in addReview",e.t0),e.t0;case 14:case"end":return e.stop()}},e,null,[[1,10]])}));function t(t,r){return e.apply(this,arguments)}return t}(),loadReviews:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,et.query();case 3:r=e.sent,t.commit({type:"setReviews",reviews:r}),z.off(B),z.on(B,function(e){console.log("Got review from socket",e),t.commit({type:"addReview",review:e})}),z.off(G),z.on(G,function(e){console.log("Review about me!",e)}),e.next=15;break;case 11:throw e.prev=11,e.t0=e["catch"](0),console.log("reviewStore: Error in loadReviews",e.t0),e.t0;case 15:case"end":return e.stop()}},e,null,[[0,11]])}));function t(t){return e.apply(this,arguments)}return t}(),removeReview:function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.reviewId,e.prev=1,e.next=4,et.remove(n);case 4:t.commit({type:"removeReview",reviewId:n}),e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),console.log("reviewStore: Error in removeReview",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[1,7]])}));function t(t,r){return e.apply(this,arguments)}return t}()}};n["a"].use(_e["a"]);var it=new _e["a"].Store({strict:!0,modules:{userStore:Xe,socketStore:Ze,reviewStore:st},state:{},mutations:{},actions:{}}),ut=(r("2fb4"),r("9483"));Object(ut["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["a"].config.productionTip=!1,new n["a"]({router:be,store:it,render:function(e){return e(k)}}).$mount("#app")},cf05:function(e,t,r){e.exports=r.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.5fb99fbf.js.map